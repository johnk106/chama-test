{% load static %}

<footer class="mbl_footer">
    <div class="container">
        <div class="footer_row d-flex flex-row justify-content-between align-items-center">
            <button class="footer_button btn" onclick="handleFooterHome()">
                <img class="homer_white" src="{% static 'images/home_white.png' %}" alt="">
                <p>Home</p>
            </button>
            <button class="footer_button btn active" onclick="handleFooterFeatures()">
                <img src="{% static 'images/filter_active.png' %}" alt="">
                <p>Features</p>
            </button>
            <button class="footer_button btn" onclick="handleFooterAccount()">
                <img src="{% static 'images/wallet_alt_fill.png' %}" alt="">
                <p>Account</p>
            </button>
            <button class="footer_button btn" onclick="handleFooterSettings()">
                <img src="{% static 'images/setting.png' %}" alt="">
                <p>Settings</p>
            </button>
        </div>
    </div>
</footer>

<script>
// Mobile footer navigation handlers
function handleFooterHome() {
    // Navigate to dashboard
    var chama_id = localStorage.getItem('groupId');
    if (chama_id) {
        window.location.href = `/chamas-bookeeping/chama-dashboard/${chama_id}/`;
    } else {
        // If no chama selected, go to chamas list
        window.location.href = "{% url 'chamas:chamas' %}";
    }
}

function handleFooterFeatures() {
    // Navigate to contributions (main feature page)
    var chama_id = localStorage.getItem('groupId');
    if (chama_id) {
        window.location.href = `/chamas-bookeeping/contributions/${chama_id}/`;
    } else {
        window.location.href = "{% url 'chamas:chamas' %}";
    }
}

function handleFooterAccount() {
    // Navigate to finances/wallet
    var chama_id = localStorage.getItem('groupId');
    if (chama_id) {
        window.location.href = `/chamas-bookeeping/chama-finances/${chama_id}/`;
    } else {
        window.location.href = "{% url 'chamas:chamas' %}";
    }
}

function handleFooterSettings() {
    // Navigate to settings
    window.location.href = "{% url 'Setting' %}";
}

// Update active state based on current page
document.addEventListener('DOMContentLoaded', function() {
    var currentPath = window.location.pathname;
    var footerButtons = document.querySelectorAll('.footer_button');
    
    // Remove active class from all buttons
    footerButtons.forEach(function(button) {
        button.classList.remove('active');
    });
    
    // Add active class based on current page
    if (currentPath.includes('/chama-dashboard/')) {
        footerButtons[0].classList.add('active'); // Home
    } else if (currentPath.includes('/contributions/')) {
        footerButtons[1].classList.add('active'); // Features
    } else if (currentPath.includes('/chama-finances/')) {
        footerButtons[2].classList.add('active'); // Account
    } else if (currentPath.includes('/settings/') || currentPath.includes('/Setting/')) {
        footerButtons[3].classList.add('active'); // Settings
    }
});
</script>